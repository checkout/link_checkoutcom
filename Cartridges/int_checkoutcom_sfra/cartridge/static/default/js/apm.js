"use strict";function initApmAccordion(){$('.cko-apm-accordion input[type="radio"]').on("click touch",function(i){i.stopPropagation(),$(this).parents(".cko-apm-accordion").trigger("click")}),$(".cko-apm-accordion").on("click touch",function(i){i.preventDefault(),$('.cko-apm-accordion input[type="radio"]').prop("checked",!1),$(this).children('input[type="radio"]').prop("checked",!0),$(".cko-apm-accordion").removeClass("cko-apm-active"),$(".cko-apm-panel").css("maxHeight","0px"),$(".cko-apm-panel").removeClass("cko-apm-panel-opened"),$(".cko-apm-panel").css("display","block"),$(this).addClass("cko-apm-active");var t=$(this).parents(".apm-list-item").attr("id");$('input[name="dwfrm_billing_apmForm_ckoSelectedApm"]').val(t),initCheckoutcomApmValidation();var e=$(this).next();e.css("display","table"),"0px"!==e.css("maxHeight")?e.css("maxHeight","0px"):e.css("maxHeight",e.prop("scrollHeight")+"px")})}function filterApm(){var i=$("#ckoApmFilterUrl").val(),t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var i=JSON.parse(this.responseText),t=!1,e=i.filterObject,a=i.ckoApmFilterConfig;for(var n in a){var o=a[n].countries.includes(e.country.toUpperCase()),c=a[n].countries.includes("*"),p=a[n].currencies.includes(e.currency),s=a[n].enabled;(o||c)&&p&&s&&(t=!0,$("#"+n).css("display","block"))}t||$("a.apm-tab").parent().hide()}},t.open("GET",i,!0),t.send()}function initCheckoutcomApmValidation(){$("button.submit-payment").off("click touch").on("click touch",function(i){if("CHECKOUTCOM_APM"===$('input[name="dwfrm_billing_paymentMethod"]').val()){$(".apm-list-item .is-invalid").removeClass("is-invalid"),$(".apm-list-item .invalid-field-message").hide();var t=[],e=$(".cko-apm-active").parents(".apm-list-item").attr("id")+"FormValidation";if("function"==typeof window[e]&&(t=window[e]()).length>0){i.preventDefault(),i.stopImmediatePropagation();for(var a=0;a<t.length;a++)$(t[a]).addClass("is-invalid");var n=$(t[0]).parents(".apm-list-item").find(".invalid-field-message");n.show(),n.text(window.ckoLang.apmFieldInvalid);var o=$(t[0]).parents(".apm-list-item");$("html, body").animate({scrollTop:parseInt(o.offset().top)},500)}}})}document.addEventListener("DOMContentLoaded",function(){initApmAccordion()},!1);